"use strict";(self.webpackChunkhave_fun=self.webpackChunkhave_fun||[]).push([[677],{8597:function(t,e,n){n.d(e,{r:function(){return o}});var r,a=n(2791),i=["title","titleId"];function c(){return c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c.apply(this,arguments)}function s(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function u(t,e){var n=t.title,u=t.titleId,o=s(t,i);return a.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",ref:e,"aria-labelledby":u},o),n?a.createElement("title",{id:u},n):null,r||(r=a.createElement("path",{d:"M4 15a1 1 0 0 0 1 1h19.586l-4.292 4.292a1 1 0 0 0 1.414 1.414l6-6a.99.99 0 0 0 .292-.702V15c0-.13-.026-.26-.078-.382a.99.99 0 0 0-.216-.324l-6-6a1 1 0 0 0-1.414 1.414L24.586 14H5a1 1 0 0 0-1 1z"})))}var o=a.forwardRef(u);n.p},5677:function(t,e,n){n.r(e),n.d(e,{default:function(){return S}});var r=n(885),a="ScratchCardGame_games-container__iOPz6",i="ScratchCardGame_mobile-fallback__5EuJJ",c=n(2791),s=n(2979),u=n(8041),o=n(9976),l=n(184),d=function(t){var e,n,r,a=t.options,i=t.isCanvasEmpty,s=(0,c.useRef)(null),u={x:null,y:null},o=0;return(0,c.useEffect)((function(){s.current.removeEventListener("mousedown",e),s.current.removeEventListener("mouseup",n),s.current.removeEventListener("mousemove",r),s&&function(){var t=s.current.getContext("2d"),c=!1,l=s.current.getBoundingClientRect().left,d=s.current.getBoundingClientRect().top;t.fillStyle=a.tilesColor,t.fillRect(0,0,200,200);var m=function(){t.globalCompositeOperation="destination-out",t.beginPath(),t.arc(u.x,u.y,15,0,2*Math.PI),t.fill()};e=s.current.addEventListener("mousedown",(function(t){u.x=t.clientX-l,u.y=t.clientY-d,m(),c=!0})),n=s.current.addEventListener("mouseup",(function(t){c=!1})),r=s.current.addEventListener("mousemove",(function(e){u.x=e.clientX-l,u.y=e.clientY-d,c&&(o+=1,m()),o>100&&(t.clearRect(0,0,200,200),o<102&&i(s.current))}))}()})),(0,l.jsx)("canvas",{width:100,height:100,style:{border:"1px solid black",position:"absolute",width:"100%",height:"100%",borderRadius:"10px"},ref:s})},m="ScratchCardField_scratch-card__FAD6a",f=function(t){var e=t.Image,n=t.options,r=t.isCanvasEmpty;return(0,l.jsxs)("div",{className:m,children:[(0,l.jsx)(d,{options:n,isCanvasEmpty:r}),(0,l.jsx)(e,{style:{padding:"2rem"}})]})},p="ScratCardTemplate_game-container__GFIUc",h="ScratCardTemplate_scratch-header__X7-6S",v="ScratCardTemplate_scratch-card-container__ypEu-",g=function(t){var e=t.items,n=t.length,a=t.options,i=(0,c.useState)(null),d=(0,r.Z)(i,2),m=d[0],g=d[1],y=function(t,e){return{generateRandomArray:(0,c.useCallback)((function(){if(t&&0!==t.length){for(var n=[],r=0;r<e;)t.forEach((function(t){n.length<e&&100*Math.random()<t.chances&&n.push(t)})),r++,n.length!==e&&r===e&&r--;return n}}),[t,e])}}(e,n),x=y.generateRandomArray,b=(0,o.G)().gameResult,w=(0,u.c)().dispatchGame,_=0;(0,c.useEffect)((function(){g(x())}),[x]),(0,c.useEffect)((function(){m&&b(m)}),[m,b]);var j=(0,c.useCallback)((function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,t.toDataURL()===e.toDataURL()&&_++,_===n&&w({type:s.a.SET_SHOW_RESULT,payload:!0}),t.toDataURL()===e.toDataURL()}),[_,n,w]);return(0,l.jsxs)("div",{className:p,style:{background:a.backGroundColor},children:[(0,l.jsx)("div",{className:h,style:{borderColor:a.borderColor},children:(0,l.jsx)("p",{style:{color:a.titleColor},children:a.title})}),(0,l.jsx)("div",{className:v,children:m&&m.map((function(t){return(0,l.jsx)(f,{Image:t.image,options:a,isCanvasEmpty:j},Math.random())}))})]})},y={"items-list":"ScratchItemsList_items-list__9eSGO","item-values":"ScratchItemsList_item-values__OwSqR","item-info":"ScratchItemsList_item-info__fcaon",rotate:"ScratchItemsList_rotate__MvMGr",button:"ScratchItemsList_button__pSPJY"},x=n(8597),b=function(t){var e=t.items,n=(0,c.useState)(!0),a=(0,r.Z)(n,2),i=a[0],s=a[1];return(0,l.jsxs)("div",{className:y.container,children:[(0,l.jsx)("button",{onClick:function(){return s(!i)},className:"".concat(i?"":y.rotate," ").concat(y.button),style:{right:i?"17%":0},children:(0,l.jsx)(x.r,{})}),(0,l.jsx)("div",{className:y["items-list"],style:{right:i?0:"-100%"},children:e.map((function(t){return t.multiplier?(0,l.jsxs)("div",{className:y["item-values"],children:[(0,l.jsxs)("div",{className:y["item-info"],children:[(0,l.jsx)(t.image,{style:{width:"4rem",padding:"0.1rem"}}),(0,l.jsx)(t.image,{style:{width:"4rem",padding:"0.1rem"}}),(0,l.jsx)(t.image,{style:{width:"4rem",padding:"0.1rem"}}),(0,l.jsx)(t.image,{style:{width:"4rem",padding:"0.1rem"}}),(0,l.jsxs)("p",{children:["x",t.multiplier[3]]})]}),(0,l.jsxs)("div",{className:y["item-info"],children:[(0,l.jsx)(t.image,{style:{width:"2.5rem",padding:"0.1rem"}}),(0,l.jsx)(t.image,{style:{width:"2.5rem",padding:"0.1rem"}}),(0,l.jsx)(t.image,{style:{width:"2.5rem",padding:"0.1rem"}}),(0,l.jsxs)("p",{children:["x",t.multiplier[2]]})]})]},Math.random()):null}))})]})},w=n(5664),_=n(4165),j=n(5861),E=n(686),C=n(9808),S=function(t){var e=t.items,n=t.length,d=t.options,m=(0,o.G)().endGame,f=(0,u.c)().statistics,p=(0,w.i)().addMoney,h=(0,u.c)().dispatchGame,v=(0,c.useState)(window.innerWidth),y=(0,r.Z)(v,1)[0],x=function(){var t=(0,E.L)().updateDocument,e=(0,C.T)().document,n=function(){var n=(0,j.Z)((0,_.Z)().mark((function n(r){return(0,_.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("users",e.id,{stats:{totalPlayed:e.stats.totalPlayed+1,totalWon:e.stats.totalWon+r}});case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return{updateUserStats:n}}(),S=x.updateUserStats;return(0,c.useEffect)((function(){return function(){m()}}),[m]),(0,c.useEffect)((function(){return function(){y<=600?p(Math.round(f.bet)):f.win>0?(p(Math.round(f.win)),S(1),h({type:s.a.CLEAR_GAME})):S(0)}}),[f.win,h]),y<=600?(0,l.jsx)("div",{className:i,children:(0,l.jsx)("p",{children:"To play on mobile please download our app!"})}):(0,l.jsxs)("div",{className:a,children:[(0,l.jsx)(g,{items:e,length:n,options:d}),(0,l.jsx)(b,{items:e})]})}},9976:function(t,e,n){n.d(e,{G:function(){return o}});var r=n(2791),a=n(2979),i=n(9808),c=n(5664),s=n(2982),u=n(8041),o=function(){var t=(0,i.T)().setIsAllowedToPlay,e=(0,i.T)().document,n=(0,c.i)().subtractMoney,o=function(){var t=(0,r.useCallback)((function(t){var e=(0,s.Z)(new Set(t.map((function(t){return t.name})))).map((function(e){var n;return t.forEach((function(t){t.name===e&&(n=t.multiplier)})),{name:e,count:0,multiplier:n}}));return t.forEach((function(t){for(var n=0;n<e.length;n++)t.name===e[n].name&&e[n].count++})),e}),[]);return{calculateMultiplier:(0,r.useCallback)((function(t){var e=0;return t.forEach((function(t){if(t.multiplier)switch(t.count.toString()){case"0":return;case"1":return void(e+=t.multiplier[0]);case"2":return void(e+=t.multiplier[1]);case"3":return void(e+=t.multiplier[2]);default:return void(e+=t.multiplier[3])}})),e}),[]),getArryWithAmountOfItems:t}}(),l=o.calculateMultiplier,d=o.getArryWithAmountOfItems,m=(0,u.c)(),f=m.dispatchGame,p=m.price;return{startGame:function(r){e.balance>=r&&(n(r),t(!0),f({type:a.a.SET_PRICE,payload:{price:r}}))},endGame:(0,r.useCallback)((function(){t(!1)}),[t]),gameResult:(0,r.useCallback)((function(t){var e=d(t),n=l(e);f({type:a.a.UPDATE_GAME,payload:{price:p,multiplier:n,win:p*n,gameItems:e}})}),[d,l,f,p])}}},5664:function(t,e,n){n.d(e,{i:function(){return s}});var r=n(4165),a=n(5861),i=n(686),c=n(9808),s=function(){var t=(0,c.T)().document,e=(0,i.L)().updateDocument,n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e("users",t.id,{balance:1e3*(t.balance+a)});case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),s=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e("users",t.id,{balance:1e3*(t.balance-a)});case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return{addMoney:n,subtractMoney:s}}}}]);
//# sourceMappingURL=677.c4464279.chunk.js.map